{% extends "index.html" %}

{% load static %}

{% block title %}
<title>Calculator</title>
{% endblock %}

{% block css %} 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
{% endblock %}

{% block script %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script> let geojsonPath = "{% static 'Net_Metering/json/Prefectures_boundaries.geojson' %}";</script>
<script src="{% static 'Net_Metering/javascript/leaflet_map.js' %}" defer></script>
<script> var calculatePowerURL = "{% url 'simulation:calculate_power' %}";</script>
<script src="{% static 'Net_Metering/javascript/scriptCalculators.js' %}" defer></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
{% endblock %}

{% block menu_list %}
    <li><a href="{% url 'home' %}"><i class="fas fa-home"></i> home</a></li>
    <li><a class="nav-link active" href="{% url 'simulation:calculator' %}"><i class="fas fa-calculator"></i> calculator</a></li>
    <li><a href="{% url 'simulation:dashboard' %}"><i class="fas fa-qrcode"></i> dashboard</a></li>
    <li><a href="{% url 'simulation:regulations' %}"><i class="fas fa-scale-unbalanced-flip"></i> regulations</a></li>
    <li><a href="{% url 'simulation:about' %}"><i class="fas fa-info-circle"></i> about</a></li>
{% endblock %}

{% block color_theme %}
    <div class="theme-toggle" title="Dark - Light Mode">
        <input type="range" id="theme-slider" min="0" max="1" step="1" value="0">
    </div>
{% endblock %}

{% block content %}

    <div class="calculator-page-content">

        <section class="section-before-calculator">
            <table class="table-title">
                    <tr class="row-in-table-title">
                        <td class="icon-calculator">
                           <i class=" fa fa-calculator" aria-hidden="true"  ></i>
                        </td>
                        <th class="calc-title">
                            <h3>Υπολογιστής Απόδοσης</h3>
                        </th>
                    </tr>
            </table>

            <article class="calculator-article">
                <div class="padding-article">
                    Ο υπολογιστής απόδοσης οικιακού φωτοβολταϊκού συστήματος αυτοπαραγωγής με ενεργειακό συμψηφισμό
                    (Net Metering), θα σας βοηθήσει να υπολογίσετε την απαραίτητη Ισχύ Φ/Β συστήματος, τον εκτιμώμενο 
                    χρόνο απόσβεσης και χρηματο-οικονομικούς δείκτες της επένδυσής σας, βάσει επιλογών εγκατάστασης 
                    και καταναλωτικού σας προφίλ.
                </div>
            </article>

        </section>

        <div class="spacer-in-main-content">
            <!-- <h2>Συμπληρώστε τα πεδία</h2> -->
            <div class="navigation-panel">
                <ul id="navigation-ul">
                  <li><a class="panel-field active" href="#panel1"><span class="circle-link active">1</span> Τοποθεσία</a></li>
                  <li><a class="panel-field" href="#panel2"><span class="circle-link">2</span> Εγκατάσταση</a></li>
                  <li><a class="panel-field" href="#panel3"><span class="circle-link">3</span> Αζιμούθιο - Κλίση</a></li>
                  <li><a class="panel-field" href="#panel4"><span class="circle-link">4</span> Κατανάλωση</a></li>
                  <li><a class="panel-field" href="#panel5"><span class="circle-link">5</span> Ισχύς</a></li>
                  <li><a class="panel-field" href="#panel6"><span class="circle-link">6</span> Αποθήκευση</a></li>
                </ul>
            </div>
        </div>

        <!-- ::: CALCULATOR FORM ::: -->
        <div class="calculator-container">

            <!-- <div class="column-calculator-page"></div> -->

            <form method="POST" class="my-form-control" id="calculatorForm" name="calculatorForm" action="{% url 'simulation:calculator' %}" onsubmit="validateForm()">
                {% csrf_token %}

                <fieldset class="calculator-fieldset">
                        <!-- PANEL 1 -->
                        <!-- Here you select installation DISTRICT -->
                        <div class="panel-calculator" id="panel1">

                            <div class="title-panel">
                                <span class="number"> 1 </span>
                                <h4>Τοποθεσία</h4>
                            </div>
                            
                                <div class="option-selector-margin">
                                    <input class="panel-selection-height" type="hidden" name="select_district" id="select_district" >
                                    
                                    <p><label for="regionInput" class="spacer-label">Επιλέξτε Τοποθεσία Εγκατάστασης Φ/Β Συστήματος στο Χάρτη:</label></p>
                                    <!-- <p class="spacer-label">{{ form_district.select_district.label_tag }}</p> -->
                                    <p  title="Παρακαλούμε, επιλέξτε ένα σημείο εντός των γεωγραφικών συνόρων. Ο Νομός και οι συντεταγμένες
                                    θα εμφανιστούν στα αντίστοιχα πεδία" id="option-selector-margin-label">{{ form_district.select_district }}</p>
                                    <input class="panel-selection-height" type="hidden" name="select_district" id="select_district" >
                                    
                                    <div class='coords-inline'>

                                        <div class="coords-map-latitude">
                                            <label for="regionInput">Νομός:</label>
                                            <input class="panel-field" type="text" name="placeInput" id="regionInput" readonly required>
                                        </div>
                                        
                                        <div class="coords-map-latitude">
                                            <label for="latitude">Πλάτος &deg;</label>
                                            <input type="number" name="latitude" id="latitude" step="0.000001" readonly required>
                                        </div>
                                        <div class="coords-map-longitude">
                                            <label for="longitude">Μήκος &deg;</label>
                                            <input type="number" name="longitude" id="longitude" step="0.000001" readonly required>
                                        </div>
                                        
                                    </div>

                                    <span id="error-message-panel">Please enter a valid value</span>
                                </div>
                                <div id="map"></div>
                        </div>

                        <!-- PANEL 2 -->
                        <!-- Here you select installation place -->
                        <div class="panel-calculator" id="panel2">
                            <div class="title-panel">
                                <span class="number"> 2 </span>
                                <h4>Εγκατάσταση</h4>
                            </div>

                                <div class="option-selector-margin" title="Παρακαλούμε, επιλέξτε εάν η εγκατάσταση θα βρίσκεται σε στέγη ή ταράτσα.">

                                    <p><label for="roof" class="spacer-label">Επιλέξτε θέση Εγκατάστασης στην οικία σας: </label></p>

                                    <div class="spacer-in-calculator-panel">
                                    </div>

                                    <div class="form-check" >
                                        <input type="radio" class="form-check-input" id="roof" name="installation" value="roof" checked>
                                        <label class="form-check-label" for="roof">Στέγη</label>
                                    </div>

                                    <div class="form-check">
                                        <input type="radio" class="form-check-input option2" id="terrace" name="installation" value="terrace">
                                        <label class="form-check-label" for="terrace">Ταράτσα</label>
                                    </div>
                                </div>            

                                    <div class="option-selector-margin" title="Παρακαλούμε, επιλέξτε είδος Φ/Β πάνελ">
                                        <p><label for="panel_wp" class="spacer-label">Επιλέξτε είδος Φ/Β πάνελ:</label></p>

                                        <div class="spacer-in-calculator-panel">
                                        </div>

                                        <select  class="panel-selection-height" name="panel_params" id="panelParams"> 
                                            <option id="defaultPanelParams" value="0.305" data-efficiency="0.183" data-panel_area="1.67" data-panel_cost="167">Mονοκρυσταλλικό Πάνελ <strong>305Wp</strong> (Βαθμός απόδοσης : ≥18,3%)</option>
                                            <option value="0.340" data-efficiency="0.165" data-panel_area="2.06" data-panel_cost="188">Πολυκρυσταλλικό Πάνελ <strong>340Wp</strong> (Βαθμός απόδοσης : 16,5%) </option>
                                            <option value="0.370" data-efficiency="0.191" data-panel_area="1.94" data-panel_cost="199">Mονοκρυσταλλικό Πάνελ <strong>370Wp</strong> (Βαθμός απόδοσης : 19,1%) </option>
                                            <option value="0.410" data-efficiency="0.21" data-panel_area="1.95" data-panel_cost="248">Mονοκρυσταλλικό Πάνελ <strong>410Wp</strong> (Βαθμός απόδοσης : 21,0%) </option>
                                            <option value="0.450" data-efficiency="0.199" data-panel_area="2.2" data-panel_cost="272">Mονοκρυσταλλικό Πάνελ <strong>450Wp</strong> (Βαθμός απόδοσης : 19,9%) </option>
                                        </select>
                                        
                                    </div>
                                    <div class="panels_parameters">
                                        <div>
                                            <input type="hidden" name="panel_wp" id="panelWpInput">
                                            <input type="hidden" name="panel_efficiency" id="panelEfficiencyInput">
                                            <label for="panel_wp">Eμβαδόν Πάνελ: </label>
                                            <input type="text" name="panel_area" id="panelAreaInput" readonly><span class="metrics-special-calculation"> m²</span>
                                        </div>
                                        <div>
                                            <label for="panel_wp">Κόστος Πάνελ: </label>
                                            <input type="text" name="panel_cost" id="panelCostInput" readonly><span class="metrics-special-calculation"> € </span>
                                        </div>
                                    </div>
                             
                        </div>            

                        <!-- PANEL 3 -->
                        <!-- Here you select Azimuth -->
                        <!-- Here you select PV inclination -->
                        <div class="panel-calculator" id="panel3">
                            <div class="title-panel">
                                <span class="number">3</span>
                                <h4>Αζιμούθιο - Κλίση</h4>
                            </div>
                            <div id="panel-azimuth-tilt">
                                <div class="option-selector-margin" title="Παρακαλούμε, επιλέξτε την κατεύθυνση του PV συστήματος" id="panel-azimuth">
                                    <p> <label for="azimuthInput" class="spacer-label">Επιλέξτε προσανατολισμό Φ/Β πάνελ: </label></p> 
                
                                    <div>
                                        <img id="compass-photo" src="{% static 'images/compass4.png'%}" alt="photo not found" style="width: 240px;">
                                    </div>

                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="west" name="azimuth" value="90">
                                        <label class="form-check-label" id="west-label" for="west"></label>
                                    </div>

                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="southWest" name="azimuth" value="45">
                                        <label class="form-check-label" id="southWest-label" for="southWest"></label>
                                    </div>

                                    <div class="form-check south">
                                        <input type="radio" class="form-check-input" id="south" name="azimuth" value="0" checked>
                                        <label class="form-check-label" id="south-label" for="south"></label>
                                    </div>

                                    <div class="form-check">
                                    <input type="radio" class="form-check-input" id="southEast" name="azimuth" value="-45">
                                    <label class="form-check-label" id="southEast-label" for="southEast"></label>
                                    </div>
                                    
                                    <div class="form-check">
                                    <input type="radio" class="form-check-input" id="east" name="azimuth" value="-90">
                                    <label class="form-check-label" id="east-label" for="east"></label>
                                    </div>

                                    <div>
                                    <label for="azimuthInput" class="azimuth_label">Αζιμούθιο σε &deg; :  </label>
                                    <input class="panel-field" type="text" id="azimuthInput" readonly>
                                    <label for="azimuthInput" class="azimuth_label">   </label>
                                </div>
                                
                                </div>
                                

                                <div class="option-selector-margin" title="Παρακαλούμε, επιλέξτε την κλίση του συστήματος PV" id="panel-tilt">
                                    <p> <label for="tiltInput" class="spacer-label">Επιλέξτε κλίση Φ/Β πάνελ:</label></p>

                                        <div class="spacer-in-calculator-panel">
                                        </div>

                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="inclination0" name="inclination" value='0'>
                                        <label class="form-check-label" for="inclination0">0&deg;</label>
                                    </div>

                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="inclination15" name="inclination" value='15'>
                                        <label class="form-check-label" for="inclination15">15&deg;</label>
                                    </div>

                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="inclination30" name="inclination" value='30' checked>
                                        <label class="form-check-label" for="inclination30">30&deg;</label>
                                    </div> 
                                            
                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" id="inclination45" name="inclination" value='45'>
                                        <label class="form-check-label" for="inclination45">45&deg;</label>
                                    </div>

                                    <div class="img-div-calculator" id="image-container">
                                        <img class="img-tilt" src="{% static 'images/0.png' %}" alt="No Image" tilt="0">
                                        <img class="img-tilt" src="{% static 'images/15.png' %}" alt="No Image" tilt="15">
                                        <img class="img-tilt" src="{% static 'images/30.png' %}" alt="No Image" tilt="30">
                                        <img class="img-tilt" src="{% static 'images/45.png' %}" alt="No Image" tilt="45">

                                    <div>
                                        <input class="panel-field" type="hidden" id="tiltInput" name="tiltInput" readonly>
                                    </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                                      
                        <!-- PANEL 4 -->
                        <!-- Here you select consumption profile -->
                        <!-- Here you select 1) Phase Load & 2) the annual consumption of your house in kWh-->
                        <div class="panel-calculator" id="panel4">
                            <div class="title-panel">
                                <span class="number"> 4 </span>
                                <h4>Προφίλ κατανάλωσης</h4>
                            </div>

                            <div class="option-selector-margin" >

                                <p> <label for="phase_load" class="spacer-label">Επιλέξτε Παροχή και KWh:</label> </p>

                                <div class="option-selector-margin-select-phase" title="Παρακαλούμε, επιλέξτε Παροχή ρεύματος">
                                    <input class="panel-selection-height" type="hidden" name="phase_load" id="phase_load"  required>

                                        {{ form_phase_load.select_phase }}
        
                                    <button class="help-popper" type="button" id="phase-load-button">
                                        <i class="fa fa-question-circle" aria-hidden="true" id="phase-load-info"></i>
                                    </button>
                                    

                                        <div class="help-container">
                                            <span class="help-text" id="phase-load-text">
                                                <strong>Παρακαλώ, συμβουλευτείτε το λογαριασμό παρόχου ρεύματος!!</strong><br><br>
                                                &#8226; <strong>Μονοφασική παροχή</strong>, εάν η συμφωνημένη ισχύς είναι: 8 ή 12 kVΑ!<br>
                                                &#8226; <strong>Τριφασική παροχή</strong>, εάν η συμφωνημένη ισχύς είναι:  > 15 kVΑ!</span>
                                            <span class="close-help">&times;</span>
                                        </div>
                                </div>

                                <div>
                                    <input class="panel-selection-height" type="number" name="annual_consumption" id="annual_kwh" title="Παρακαλούμε, συμπληρώστε εκτιμώμενη ετήσια κατανάλωση σε kW" >
                                    <span>kWh</span>
                                        <button class="help-popper" type="button">
                                          <i class="fa fa-question-circle" aria-hidden="true" id="annual-consumption-info"></i>
                                        </button>
                                    
                                        <div class="help-container">
                                            <span class="help-text" id="annual-consumption-text">
                                                <strong>Συμπληρώστε πρώτα το είδος της παροχής, για να σας επιτραπεί<br>
                                                     η συμπλήρωση ετήσιας κατανάλωσης!</strong><br><br>
                                                &#8594; Υπολογίστε <strong>κατά προσέγγιση</strong>, την ετήσια 
                                                κατανάλωση <br> ηλεκτρικού ρεύματος σε kWh.</span>
                                            <span class="close-help">&times;</span>
                                        </div>
                                        
                                </div>

                                <span id="max-message" style="display: none;">Max value</span>
                                <span id="error-message-panel5">Please enter a valid value</span>
                        
                            </div>

                            <div class="option-selector-margin" title="Πότε εντοπίζετε τις μεγαλύτερες ανάγκες σας για οικιακό ρεύμα;">
                                <p><label for="power_option" class="spacer-label">Επιλέξτε προφίλ μεγαλύτερης κατανάλωσης ρεύματος:</label></p>

                                    <div class="spacer-in-calculator-panel">
                                    </div>

                                <div class="form-check" >
                                    <input type="radio" class="form-check-input" id="day-power" name="power_option" value="day-power" checked>
                                    <label class="form-check-label" for="day-power">Ημερήσιο (08:00 - 20:00)</label>
                                </div>

                                <div class="form-check">
                                    <input type="radio" class="form-check-input option2" id="high-day-evening" name="power_option" value="high-day-evening">
                                    <label class="form-check-label" for="high-day-evening">Πρωινό - Απογευματινό (06:00 - 12:00 & 16:00 - 22:00) </label>
                                </div> 

                                <div class="form-check">
                                    <input type="radio" class="form-check-input option2" id="evening-power" name="power_option" value="evening-power">
                                    <label class="form-check-label" for="evening-power">Απογευματινό (14:00 - 23:00) </label>
                                </div> 

                                <div class="form-check">
                                    <input type="radio" class="form-check-input option2" id="night-power" name="power_option" value="night-power">
                                    <label class="form-check-label" for="night-power">Νυχτερινό (17:00 - 08:00)</label>
                                </div> 

                            </div>
                        </div>

                        <!-- PANEL 5 -->
                        <!-- Here you select the PV's kWp -->
                        <div class="panel-calculator" id="panel5">
                            <div class="title-panel">
                                <span class="number"> 5 </span>
                                <h4>Ισχύς (KWp)</h4>
                            </div>

                            <div class="option-selector-margin">
                                <div class="slide-container" title="Παρακαλώ, επιλέξτε επιθυμητή ισχύς φωτοβολταϊκού σε kWp">
                                    <p><label for="myRangeSlider" class="spacer-label">Επιλέξτε επιθυμητή Ισχύ: </label>

                                    <button class="help-popper" type="button">
                                        <i class="fa fa-question-circle" id="power-info"></i>
                                    </button>

                                        <div class="help-container">
                                            <span class="help-text" id="power-text">
                                                <strong>Προσέξτε να έχει συμπληρωθεί στο προηγούμενο βήμα, το είδος <br> παροχής και η ετήσια κατανάλωση ρεύματος!</strong><br><br>
                                                
                                                
                                                 Μπορείτε ελεύθερα να αυξομειώσετε τη συνολική ισχύ σύμφωνα με τις εξατομικευμένες ανάγκες σας και τα επιτρεπτά όρια.<br><br>
                                                 Επιλέγοντας "Εύρεση βέλτιστης Ισχύος", θα εμφανιστεί κουμπί υπολογισμού και πατώντας το, 
                                                 θα συμπληρωθoύν τα kWp του Φ/Β συστήματος που απαιτούνται για να εκμηδενίσετε την ετήσια κατανάλωση σας σε βάθος 25ετίας.<br>
                                                 <br>

                                                 <b style="color: red;">Προσοχή</b>!<br>Για Μονοφασικό σύστημα Φ/Β, μέγιστη επιτρεπτή Ισχύς 5 kWp.<br>
                                                 Για Τριφασικό σύστημα Φ/Β, μέγιστη επιτρεπτή Ισχύς 10 kWp.
                                            </span>
                                             <span class="close-help">&times;</span>
                                        </div></p>

                                        <div class="spacer-in-calculator-panel">         
                                        </div>
                                        <div class="slider-select-manual-auto" id="slider_selection_type">
                                            <div class="form-check" >
                                                <input type="radio" class="form-check-input" id="manual_power" name="power_selected" checked>
                                                <label class="form-check-label" for="manual_power">Χειροκίνητη επιλογή</label>
                                            </div>
            
                                            <div class="form-check">
                                                <input type="radio" class="form-check-input option2" id="auto_power" name="power_selected">
                                                <label class="form-check-label" for="auto_power">Εύρεση βέλτιστης Ισχύος </label>
                                            </div>

                                        </div>
                                                                             

                                    <input type="range" id="myRangeSlider" name="myRangeSlider" required>
                                    <p class="slider-label">Τιμή: <span id="slider-value"></span> kWp</p> 
                                    <input type="hidden" id="myRangeSliderHidden" name="myRangeSliderHidden" required>
                                        
                                    <span id="error-message-panel6">Παρακαλώ πρώτα επιλέξτε ετήσια κατανάλωση kWh & kWp.</span>
                                </div>
                                
                                <div id="autoPower-button-input" class="">
                                    <div class="button-auto-div">
                                        <input type="hidden" name="buttonClicked" value="true">
                                        <button class="autoPower-button" type="button" id="calculateProductionButton" onclick="startLoading()">
                                            Υπολογισμός Απαιτούμενης Ισχύος
                                        </button>
                                    </div>
                                   
                                    
                                    <div>
                                        <label for="placeProduction">Ειδική Παραγωγή:</label>
                                        <input type="text" id="placeProduction" readonly><span class="metrics-special-calculation"> kWh/panel</span>

                                    </div>
                                        <div>
                                            <label for="minimumPanels">Ελάχιστος Αριθμός Πάνελ:</label>
                                            <input type="text" id="minimumPanels" name="minimumPanels" readonly><span class="metrics-special-calculation"> panels</span>
                                        </div>
                                    <div>
                                        <label for="totalArea">Συνολικό Εμβαδόν:</label>
                                        <input type="text" id="totalArea" readonly><span class="metrics-special-calculation"> m²</span>
                                    </div>
                                    
                                    <!-- Add the loading bar container -->
                                    <div id="loading-bar-container">
                                        <div id="loading-bar">0%</div>
                                    </div>
                                </div>
                                
                            </div>
                            
                        </div>

                        <!-- PANEL 6 -->
                        <!-- Here you select battery kwh -->
                        <!-- Here you select discount percentage -->
                        <div class="panel-calculator" id="panel6">
                            <div class="title-panel">
                                <span class="number"> 6 </span>
                                <h4>Aποθήκευση - Επιδότηση</h4>
                            </div>

                            <div class="option-selector-margin" title="Παρακαλούμε, πρώτα συμπληρώστε τα πεδία Κατανάλωση και Ισχύς και στη συνέχεια επιλέξτε εάν επιθυμείτε προσθήκη συσσωρευτών ή όχι">
                                <p><label for="storage" class="spacer-label">Επιθυμείτε προσθήκη συσσωρευτή:</label></p>
                                    
                                <div class="spacer-in-calculator-panel">  
                                </div>

                                <div class="form-check" >
                                    <input type="radio" class="form-check-input" id="without_storage" name="storage" value="without_storage" checked>
                                    <label class="form-check-label" for="without_storage">Xωρίς</label>
                                </div>

                                <div class="form-check">
                                    <input type="radio" class="form-check-input option2" id="with_storage" name="storage" value="with_storage">
                                    <label class="form-check-label" for="with_storage">Με</label>

                                    <div class="hidden-storage">
                                        <label for="storage_kw">Iσχύς μπαταρίας (σε kWh):</label>

                                        <button class="help-popper" type="button" title="">
                                            <i class="fa fa-question-circle" id="battery-info"></i>
                                        </button>

                                            <div class="help-container" title="">
                                                <span class="help-text" id="storage-text">
                                                    &#8226; Η <strong>ελάχιστη</strong> τιμή kWh για τον συσσωρευτή είναι ίση με τα kVA της<br> Ισχύος Φ/Β!<br>
                                                    &#8226; Η <strong>μέγιστη</strong> δυνατή τιμή, είναι 10 kWh<br>
                                                </span>    
                                                <span class="close-help">&times;</span>
                                            </div>
                                        <input type="number" class="form-control" id="storage_kw" name="storage_kw">
                                    </div>
                                </div>
                            </div>

                            <div class="option-selector-margin" title="Παρακαλούμε, επιλέξτε εάν είστε δικαιούχος έπκπτωσης ή επιδότησης και ποσοστά έκπτωσης">
                                <p><label for="discount" class="spacer-label">Είστε δικαιούχος επιδότησης: </label></p>
                                    
                                <div class="spacer-in-calculator-panel">
                                    
                                </div>

                                <div class="form-check" >
                                    <input type="radio" class="form-check-input" id="no-discount" name="discount" value="no" checked >
                                    <label class="form-check-label" for="no-discount">Όχι</label>
                                </div>

                                <div class="form-check">
                                    <input type="radio" class="form-check-input option2" id="discount" name="discount" value="yes">
                                    <label class="form-check-label" for="discount">Ναι</label>

                                    <div class="hidden-storage" id="discountPercentContainer" style="display: none;" >
                                        <label for="discount_percent">Ποσοστό έκπτωσης ΦΒ Σταθμού (σε %):</label>

                                        <button class="help-popper" type="button">
                                            <i class="fa fa-question-circle" id="discount-icon"></i>
                                        </button>
    
                                            <div class="help-container">
                                                <span class="help-text" id="discount-text">
                                                    <ul><li>Ποσοστά έκπτωσης σύμφωνα με το πρόγραμμα <strong>"Φωτοβολταϊκά <br> στη Στέγη"</strong>, φαίνονται <br>
                                                     στην παρακάτω φωτογραφία. <strong>Για να είναι κάποιος δικαιούχος επιδότησης, πρέπει απαρέγκλιτα <br> 
                                                     να προσθέσει στο ΦΒ του σύστημα μπαταρία</strong>. Βέβαια ξεχωριστά του προγράμματος, μπορεί ο εκάστοτε <br>
                                                     χρήστης της εφαρμογής να επιλέξει ποσοστό έκπτωσης μόνο για το κόστος του ΦΒ συστήματος, εφόσον έχει <br> 
                                                     προεγκαταστημένο σύστημα και επθυμεί μία οικονομική μελέτη, για αύξηση ισχύος συστήματος kWp.</li></ul>
                                                    
                                                    <img class="img-discount" src="{% static 'images/discount.png' %}" alt="No Image">
                                                    
                                                </span>
                                                 <span class="close-help">&times;</span>
                                            </div>

                                        <select class="form-control discount_percent_select" id="discount_percent" name="discount_percent">
                                            <!-- Add default option -->
                                            <option value="">Επιλέξτε ποσοστό</option>
                                        </select>
                                        <!-- <input type="number" class="form-control" id="discount_percent" name="discount_percent"> -->

                                        <label for="discount_percent_battery">Ποσοστό έκπτωσης Μπαταρίας (σε %):</label>
                                        <button class="help-popper" type="button">
                                            <i class="fa fa-question-circle" id="discount-battery-icon"></i>
                                        </button>
    
                                            <div class="help-container">
                                                <span class="help-text" id="discount-battery-text">
                                                    <ul><li>Σύμφωνα με το πρόγραμμα <strong>"Φωτοβολταϊκά στη Στέγη"</strong> για να είναι κάποιος δικαιούχος επιδότησης, πρέπει απαρέγκλιτα <br> 
                                                     να προσθέσει στο ΦΒ σύστημα μπαταρία. Αναφορικά με τα ποσοστά έκπτωσης για προσθήκης μπαταρίας στο σύστημα, όσοι ανήκουν στις κατηγορίες Α και Β <br>
                                                     δικαιούνται 100% έκπτωση, ενώ σε όσους ανήκουν στην κατηγορία Γ, το ποσοστό ανέρχεται στο 90% του κόστους.</li></ul>
                                                    
                                                </span>
                                                 <span class="close-help">&times;</span>
                                            </div>

                                        <select class="form-control discount_percent_battery_select" id="discount_percent_battery" name="discount_percent_battery">
                                            <!-- Add default option -->
                                            <option value="">Επιλέξτε ποσοστό</option>
                                        </select>
                                        <!-- <input type="number" class="form-control" id="discount_percent_battery" name="discount_percent_battery"> -->
                                    </div>

                                </div>
                                <input type="hidden" id="lastPanelField" readonly>
                            </div>
                        </div>
                                           
                </fieldset>

                               
                <div class="my-submit-form">
                    <!-- Previous and Next buttons -->
                    <div>
                        <button type="button" class="form-reset-button" id="resetBtn"><i class="fas fa-undo"></i> Διόρθωση</button>
                        <button type="button" id="previous-button"> &#11164; Προηγούμενο</button>
                        <button type="button" id="next-button">Επόμενο &#11166;</button>
                    </div>
                    
                    <button class="form-submit-button btn btn-primary" type="button" id="submitBtn">Υποβολή <i class="fa fa-upload"></i></button>
                </div>
                    
                    <!-- Modal -->
                    <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h2 class="modal-title fs-5" id="myModalLabel">Υποβολή Φόρμας</h2>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                    <div class="modal-body">
                                        <p>Έχετε επιλέξει τα εξής δεδομένα:</p>
                                        <label for="place_modal_value">Νομός:</label>
                                        <input type="text" class="form-control" id="place_modal_value" readonly>
                                        <label for="azimuth_modal_value">Αζιμούθιο (σε &deg;):</label>
                                        <input type="number" class="form-control" id="azimuth_modal_value" readonly>
                                        <label for="tilt_modal_value">Κλίση (σε &deg;):</label>
                                        <input type="number" class="form-control" id="tilt_modal_value" readonly>
                                        <label for="annual_Kwh_modal_value">Κατανάλωση (σε kWh):</label>
                                        <input type="number" class="form-control" id="annual_Kwh_modal_value" readonly>
                                        <label for="profile_modal_value">Προφίλ κατανάλωσης (ωράριο):</label>
                                        <input type="text" class="form-control" id="profile_modal_value" readonly>
                                        <label for="power_modal_value">Ισχύς (σε kWp):</label>
                                        <input type="number" class="form-control" id="power_modal_value" readonly>
                                        <label for="battery_modal_value">Μπαταρία (σε kWh):</label>
                                        <input type="number" class="form-control" id="battery_modal_value" readonly>
                                        <label for="discount_percent_modal_value">Ποσοστό έκπτωσης ΦΒ Σταθμού (σε %):</label>
                                        <input type="number" class="form-control" id="discount_percent_modal_value" readonly>
                                        <label for="discount_percent_battery_modal_value">Ποσοστό έκπτωσης Μπαταρίας (σε %):</label>
                                        <input type="number" class="form-control" id="discount_percent_battery_modal_value" readonly>
                                        <br>
                                        Εάν συμφωνείτε πατήστε <strong>"Υποβολή"</strong>.
                                    </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Επιστροφή</button>
                                    <button type="button" class="btn btn-primary" id="submit_modal">Υποβολή</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>

            <!-- <div class="column-calculator-page"></div> -->
        </div>
        
    



{% endblock %}
